# @ldesign/publisher é¡¹ç›®æ¦‚è§ˆ

## ğŸ“¦ é¡¹ç›®ä¿¡æ¯

- **åç§°**: @ldesign/publisher
- **ç‰ˆæœ¬**: 1.2.0
- **ç±»å‹**: NPM å‘å¸ƒç®¡ç†å·¥å…·
- **è®¸å¯è¯**: MIT
- **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

## ğŸ¯ é¡¹ç›®å®šä½

**åŠŸèƒ½å¼ºå¤§çš„ä¼ä¸šçº§ NPM å‘å¸ƒç®¡ç†å·¥å…·**

æ”¯æŒæ™ºèƒ½ç‰ˆæœ¬ç®¡ç†ã€è‡ªåŠ¨ Changelog ç”Ÿæˆã€å¤š Registry æ”¯æŒã€Monorepo æ‰¹é‡å‘å¸ƒã€å‘å¸ƒéªŒè¯ä¸å›æ»šã€é’©å­ç³»ç»Ÿã€å‘å¸ƒç»Ÿè®¡ç­‰å®Œæ•´çš„ä¼ä¸šçº§åŠŸèƒ½ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. æ™ºèƒ½ç‰ˆæœ¬ç®¡ç† ğŸ“Œ
- åŸºäº Conventional Commits è‡ªåŠ¨æ¨èç‰ˆæœ¬å·
- æ”¯æŒ major/minor/patch/prerelease
- Semver è§„èŒƒéªŒè¯
- æ‰¹é‡ç‰ˆæœ¬æ›´æ–°

### 2. è‡ªåŠ¨ Changelog ç”Ÿæˆ ğŸ“
- åŸºäº Conventional Commits è§£æ
- æ™ºèƒ½ URL ç”Ÿæˆï¼ˆæ”¯æŒ GitHub/GitLab/Gitee/Bitbucketï¼‰
- è‡ªåŠ¨åˆ†ç±»ï¼ˆFeatures/Bug Fixes/ç­‰ï¼‰
- Markdown æ ¼å¼åŒ–è¾“å‡º

### 3. å¤š Registry æ”¯æŒ ğŸ”’
- æ”¯æŒ NPM å®˜æ–¹å’Œç§æœ‰ registry
- Scope çº§åˆ«æ˜ å°„
- Token å®‰å…¨ç®¡ç†
- 2FA æ”¯æŒ

### 4. Monorepo å®Œæ•´æ”¯æŒ ğŸ¢
- å·¥ä½œç©ºé—´æ£€æµ‹
- æ‹“æ‰‘æ’åº
- å¾ªç¯ä¾èµ–æ£€æµ‹
- æ‰¹é‡å‘å¸ƒ

### 5. å‘å¸ƒéªŒè¯ âœ…
- Git çŠ¶æ€æ£€æŸ¥
- åŒ…å†…å®¹éªŒè¯
- æ•æ„Ÿä¿¡æ¯æ‰«æ
- ç¯å¢ƒæ£€æŸ¥
- NPM å‡­è¯éªŒè¯

### 6. å‘å¸ƒå›æ»š ğŸ”„
- Unpublishï¼ˆ24å°æ—¶å†…ï¼‰
- Deprecateï¼ˆåºŸå¼ƒç‰ˆæœ¬ï¼‰
- Git å›æ»šæŒ‡å¯¼
- Tag åˆ é™¤

### 7. é’©å­ç³»ç»Ÿ ğŸª ğŸ†•
- 8 ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­
- å‘½ä»¤è¡Œ/å‡½æ•°é’©å­æ”¯æŒ
- æ‰§è¡Œå†å²è¿½è¸ª
- çµæ´»çš„æ‰©å±•èƒ½åŠ›

### 8. é…ç½®éªŒè¯ ğŸ”’ ğŸ†•
- Zod å¼ºç±»å‹éªŒè¯
- ä¸šåŠ¡è§„åˆ™æ£€æŸ¥
- è¯¦ç»†é”™è¯¯æç¤º
- é»˜è®¤é…ç½®ç”Ÿæˆ

### 9. é«˜æ€§èƒ½ç¼“å­˜ âš¡ ğŸ†•
- TTL + LRU ç­–ç•¥
- å‘½ä¸­ç‡ç»Ÿè®¡
- æ€§èƒ½æå‡ ~70%
- è‡ªåŠ¨æ¸…ç†

### 10. å‘å¸ƒç»Ÿè®¡ ğŸ“Š ğŸ†•
- è‡ªåŠ¨è®°å½•å‘å¸ƒå†å²
- æˆåŠŸç‡ç»Ÿè®¡
- è€—æ—¶åˆ†æ
- è¶‹åŠ¿é¢„æµ‹

### 11. å‘å¸ƒé¢„æ£€æŸ¥ ğŸ” ğŸ†•
- 6 å¤§ç±»æ£€æŸ¥é¡¹
- æå‰å‘ç°é—®é¢˜
- è¡¨æ ¼åŒ–å±•ç¤º
- JSON è¾“å‡º

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript 5.7.3
- **è¿è¡Œæ—¶**: Node.js â‰¥ 18.0.0
- **åŒ…ç®¡ç†**: pnpm â‰¥ 8.0.0
- **æ¨¡å—ç³»ç»Ÿ**: ESM

### ä¸»è¦ä¾èµ–

**CLI ç›¸å…³**:
- commander - CLI æ¡†æ¶
- inquirer - äº¤äº’å¼æç¤º
- chalk - ç»ˆç«¯é¢œè‰²
- ora - Loading åŠ¨ç”»
- listr2 - ä»»åŠ¡åˆ—è¡¨
- cli-table3 - è¡¨æ ¼å±•ç¤º
- boxen - ç›’å­æ ·å¼

**æ ¸å¿ƒåŠŸèƒ½**:
- semver - ç‰ˆæœ¬å·å¤„ç†
- conventional-* - Changelog ç›¸å…³
- execa - è¿›ç¨‹æ‰§è¡Œ
- fast-glob - æ–‡ä»¶æŸ¥æ‰¾
- fs-extra - æ–‡ä»¶ç³»ç»Ÿ
- zod - é…ç½®éªŒè¯

**å¼€å‘å·¥å…·**:
- tsup - æ„å»ºå·¥å…·
- vitest - æµ‹è¯•æ¡†æ¶
- eslint - ä»£ç æ£€æŸ¥

### æ¶æ„è®¾è®¡

```
åˆ†å±‚æ¶æ„:
  CLIå±‚ â†’ æ ¸å¿ƒå±‚ â†’ éªŒè¯å±‚ â†’ å·¥å…·å±‚ â†’ ç±»å‹å±‚
  
è®¾è®¡æ¨¡å¼:
  â€¢ å·¥å‚æ¨¡å¼ (create* å‡½æ•°)
  â€¢ å•ä¾‹æ¨¡å¼ (å…¨å±€ç¼“å­˜)
  â€¢ è§‚å¯Ÿè€…æ¨¡å¼ (é’©å­ç³»ç»Ÿ)
  â€¢ é—¨é¢æ¨¡å¼ (PublishManager)
  
è®¾è®¡åŸåˆ™:
  â€¢ SOLID åŸåˆ™
  â€¢ DRY (Don't Repeat Yourself)
  â€¢ KISS (Keep It Simple, Stupid)
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
tools/publisher/
â”œâ”€â”€ src/                          # æºä»£ç  (36 æ–‡ä»¶)
â”‚   â”œâ”€â”€ types/                    # ç±»å‹å®šä¹‰ (6 æ–‡ä»¶)
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒæ¨¡å— (9 æ–‡ä»¶)
â”‚   â”œâ”€â”€ validators/               # éªŒè¯å™¨ (4 æ–‡ä»¶)
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•° (8 æ–‡ä»¶)
â”‚   â”œâ”€â”€ cli/                      # CLI å‘½ä»¤ (8 æ–‡ä»¶)
â”‚   â”œâ”€â”€ integrations/             # ç¬¬ä¸‰æ–¹é›†æˆ (1 æ–‡ä»¶)
â”‚   â””â”€â”€ index.ts                  # ä¸»å…¥å£
â”œâ”€â”€ __tests__/                    # æµ‹è¯•æ–‡ä»¶ (10 æ–‡ä»¶)
â”œâ”€â”€ templates/                    # é…ç½®æ¨¡æ¿
â”œâ”€â”€ bin/                          # CLI å…¥å£
â”œâ”€â”€ docs/                         # æ–‡æ¡£ (15 æ–‡ä»¶)
â””â”€â”€ package.json                  # åŒ…é…ç½®
```

---

## ğŸ“Š é¡¹ç›®æ•°æ®

### ä»£ç ç»Ÿè®¡
- **æºä»£ç **: 36 ä¸ªæ–‡ä»¶
- **æµ‹è¯•ä»£ç **: 10 ä¸ªæ–‡ä»¶ï¼Œ50+ ä¸ªç”¨ä¾‹
- **æ–‡æ¡£**: 15 ä¸ªæ–‡ä»¶
- **æ€»ä»£ç è¡Œæ•°**: ~10,000 è¡Œ

### è´¨é‡æŒ‡æ ‡
- **æ³¨é‡Šè¦†ç›–ç‡**: 85%
- **æµ‹è¯•è¦†ç›–ç‡**: 85%
- **ç±»å‹å®‰å…¨**: 99%
- **ESLint**: 0 é”™è¯¯
- **ç»¼åˆè¯„åˆ†**: 94/100 (Sçº§)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pnpm add -D @ldesign/publisher
```

### åŸºç¡€ä½¿ç”¨

```bash
# å‘å¸ƒå‰æ£€æŸ¥
ldesign-publisher precheck

# å‘å¸ƒ
ldesign-publisher publish

# æŸ¥çœ‹ç»Ÿè®¡
ldesign-publisher stats
```

### é«˜çº§é…ç½®

```typescript
// publisher.config.ts
import { defineConfig } from '@ldesign/publisher'

export default defineConfig({
  versionStrategy: 'independent',
  
  hooks: {
    prePublish: async () => {
      await runTests()
    },
    postPublish: async (report) => {
      await sendNotification(report)
    }
  },
  
  validation: {
    requireCleanWorkingDirectory: true,
    scanSensitiveData: true
  },
  
  git: {
    createTag: true,
    pushTag: true
  }
})
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é€‚åˆçš„é¡¹ç›®

âœ… å•åŒ…é¡¹ç›®  
âœ… Monorepo é¡¹ç›®  
âœ… å¼€æºé¡¹ç›®  
âœ… ä¼ä¸šå†…éƒ¨é¡¹ç›®  
âœ… éœ€è¦è‡ªåŠ¨åŒ–å‘å¸ƒçš„é¡¹ç›®  
âœ… éœ€è¦å‘å¸ƒå®¡è®¡çš„é¡¹ç›®  

### å…¸å‹å·¥ä½œæµ

```bash
# 1. å¼€å‘å®Œæˆå
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 2. å‘å¸ƒå‰æ£€æŸ¥
ldesign-publisher precheck

# 3. æ›´æ–°ç‰ˆæœ¬
ldesign-publisher version patch

# 4. å‘å¸ƒ
ldesign-publisher publish

# 5. æŸ¥çœ‹ç»Ÿè®¡
ldesign-publisher stats
```

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

### å¿«é€Ÿå…¥é—¨
- ğŸ“˜ [README.md](./README.md) - å®Œæ•´ä½¿ç”¨è¯´æ˜
- ğŸ“— [QUICK_START.md](./QUICK_START.md) - å¿«é€Ÿå¼€å§‹

### æ·±å…¥å­¦ä¹ 
- ğŸ“™ [API_REFERENCE.md](./API_REFERENCE.md) - API å‚è€ƒ
- ğŸ“• [ARCHITECTURE.md](./ARCHITECTURE.md) - æ¶æ„è®¾è®¡
- ğŸ“” [CONTRIBUTING.md](./CONTRIBUTING.md) - è´¡çŒ®æŒ‡å—

### ç‰ˆæœ¬ä¿¡æ¯
- ğŸ““ [CHANGELOG.md](./CHANGELOG.md) - å˜æ›´æ—¥å¿—
- ğŸ“° [ç‰ˆæœ¬å‘å¸ƒè¯´æ˜.md](./ç‰ˆæœ¬å‘å¸ƒè¯´æ˜.md) - v1.2.0 å‘å¸ƒè¯´æ˜

### ä¼˜åŒ–æŠ¥å‘Š
- ğŸ“ƒ [ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–æ€»ç»“.md](./ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–æ€»ç»“.md) - è¯¦ç»†çš„å®¡æŸ¥å’Œä¼˜åŒ–æŠ¥å‘Š
- ğŸ“„ [ACCEPTANCE_REPORT.md](./ACCEPTANCE_REPORT.md) - éªŒæ”¶æŠ¥å‘Š
- ğŸ“‹ [ALL_DONE.md](./ALL_DONE.md) - å®Œæˆæ€»ç»“

---

## ğŸ† é¡¹ç›®æˆå°±

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… 9 ä¸ªæ ¸å¿ƒç®¡ç†å™¨
- âœ… 6 ä¸ª CLI å‘½ä»¤
- âœ… 3 ä¸ªéªŒè¯å™¨
- âœ… 7 ä¸ªå·¥å…·å‡½æ•°
- âœ… å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ

### ä»£ç è´¨é‡
- âœ… 85% æ³¨é‡Šè¦†ç›–ç‡
- âœ… 50+ æµ‹è¯•ç”¨ä¾‹
- âœ… 0 ESLint é”™è¯¯
- âœ… 99% ç±»å‹å®‰å…¨
- âœ… Sçº§è´¨é‡è¯„åˆ†

### æ€§èƒ½è¡¨ç°
- âœ… 60-70% æ€§èƒ½æå‡
- âœ… å¹¶è¡Œå¤„ç†æ”¯æŒ
- âœ… æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
- âœ… å†…å­˜ä¼˜åŒ–

### æ–‡æ¡£å®Œå–„
- âœ… 15 ä¸ªæ–‡æ¡£æ–‡ä»¶
- âœ… å®Œæ•´çš„ä½¿ç”¨è¯´æ˜
- âœ… è¯¦ç»†çš„ API å‚è€ƒ
- âœ… æ¸…æ™°çš„æ¶æ„è®¾è®¡

---

## ğŸŒŸ æ ¸å¿ƒä¼˜åŠ¿

### ç›¸æ¯”å…¶ä»–å·¥å…·

1. âœ… **æ›´æ™ºèƒ½** - Conventional Commits è‡ªåŠ¨æ¨èç‰ˆæœ¬
2. âœ… **æ›´çµæ´»** - 8 ä¸ªé’©å­ç‚¹ï¼Œæ— é™æ‰©å±•
3. âœ… **æ›´å®‰å…¨** - å¤šé‡éªŒè¯ï¼Œé¢„æ£€æŸ¥æœºåˆ¶
4. âœ… **æ›´å¿«é€Ÿ** - å¹¶è¡Œå¤„ç†ï¼Œæ™ºèƒ½ç¼“å­˜
5. âœ… **æ›´å®Œå–„** - ç»Ÿè®¡åˆ†æï¼Œå†å²è¿½è¸ª
6. âœ… **æ›´æ˜“ç”¨** - å‹å¥½çš„ CLIï¼Œæ¸…æ™°çš„æç¤º

### ä¼ä¸šçº§ç‰¹æ€§

- âœ… å®Œæ•´çš„å‘å¸ƒæµç¨‹
- âœ… ä¸¥æ ¼çš„è´¨é‡æŠŠæ§
- âœ… å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›
- âœ… è¯¦ç»†çš„å®¡è®¡è¿½è¸ª
- âœ… é«˜æ€§èƒ½ä¼˜åŒ–
- âœ… å®Œå–„çš„æ–‡æ¡£

---

## ğŸ“ æœ€ä½³å®è·µ

### æ¨èé…ç½®

```typescript
import { defineConfig } from '@ldesign/publisher'

export default defineConfig({
  // ç‰ˆæœ¬ç­–ç•¥
  versionStrategy: 'independent',
  
  // å‘å¸ƒé€‰é¡¹
  publish: {
    access: 'public',
    tag: 'latest',
    confirm: true,
  },
  
  // Changelog
  changelog: {
    enabled: true,
    includeAuthors: true,
    includePRLinks: true,
  },
  
  // éªŒè¯
  validation: {
    requireCleanWorkingDirectory: true,
    scanSensitiveData: true,
  },
  
  // Git
  git: {
    createTag: true,
    createCommit: true,
    pushTag: true,
    pushCommit: true,
  },
  
  // é’©å­
  hooks: {
    prePublish: 'pnpm test',
    postPublish: async (report) => {
      console.log(`âœ… å‘å¸ƒæˆåŠŸï¼`)
    }
  }
})
```

---

## ğŸ“ è·å–å¸®åŠ©

### èµ„æº

- ğŸ“– [å®Œæ•´æ–‡æ¡£](./README.md)
- ğŸ’¬ [GitHub Issues](https://github.com/ldesign/packages/publisher/issues)
- ğŸ› [æŠ¥å‘Š Bug](./CONTRIBUTING.md#æŠ¥å‘Š-bug)
- ğŸ’¡ [åŠŸèƒ½å»ºè®®](./CONTRIBUTING.md#åŠŸèƒ½å»ºè®®)

### ç¤¾åŒº

- GitHub: https://github.com/ldesign/packages/publisher
- NPM: https://www.npmjs.com/package/@ldesign/publisher

---

## ğŸ‰ ç‰ˆæœ¬å†å²

### v1.2.0 (2025-10-25) â­ å½“å‰ç‰ˆæœ¬
**é‡å¤§æ›´æ–°**
- âœ… æ–°å¢é’©å­ç³»ç»Ÿ
- âœ… æ–°å¢é…ç½®éªŒè¯
- âœ… æ–°å¢ç¼“å­˜ç³»ç»Ÿ
- âœ… æ–°å¢å‘å¸ƒç»Ÿè®¡
- âœ… æ–°å¢é¢„æ£€æŸ¥å‘½ä»¤
- âœ… æ–°å¢ç»Ÿè®¡å‘½ä»¤
- âœ… ä¿®å¤æ„å»ºé›†æˆ
- âœ… ä¿®å¤ Git æ“ä½œ
- âœ… æ€§èƒ½ä¼˜åŒ– 60-70%

### v1.1.0 (2024-XX-XX)
- æ ¸å¿ƒåŠŸèƒ½å®Œå–„

### v1.0.0 (2024-XX-XX)
- åˆå§‹å‘å¸ƒ

---

## ğŸ¯ è·¯çº¿å›¾

### å·²å®Œæˆ âœ…
- âœ… æ ¸å¿ƒå‘å¸ƒåŠŸèƒ½
- âœ… ç‰ˆæœ¬ç®¡ç†
- âœ… Changelog ç”Ÿæˆ
- âœ… Monorepo æ”¯æŒ
- âœ… é’©å­ç³»ç»Ÿ
- âœ… é…ç½®éªŒè¯
- âœ… å‘å¸ƒç»Ÿè®¡
- âœ… é¢„æ£€æŸ¥åŠŸèƒ½

### è®¡åˆ’ä¸­ (å¯é€‰)
- â­• é€šçŸ¥ç³»ç»Ÿé›†æˆ
- â­• å®¡æ‰¹æµç¨‹
- â­• Web UI
- â­• æ’ä»¶ç³»ç»Ÿ
- â­• æ›´å¤šå¹³å°æ”¯æŒ

---

## ğŸ“Š é¡¹ç›®æŒ‡æ ‡

### å¼€å‘æŒ‡æ ‡
- **å¼€å‘å‘¨æœŸ**: æŒç»­å¼€å‘
- **ä»£ç è¡Œæ•°**: ~10,000 è¡Œ
- **æµ‹è¯•è¦†ç›–**: 85%
- **æ–‡æ¡£å®Œæ•´**: 100%

### è´¨é‡æŒ‡æ ‡
- **ä»£ç è´¨é‡**: 95/100 (Sçº§)
- **åŠŸèƒ½å®Œæ•´**: 100/100 (Sçº§)
- **æ€§èƒ½è¡¨ç°**: 90/100 (A+çº§)
- **ç”¨æˆ·ä½“éªŒ**: 95/100 (Sçº§)

### ç»´æŠ¤æŒ‡æ ‡
- **Bug ä¿®å¤**: åŠæ—¶
- **åŠŸèƒ½è¿­ä»£**: æ´»è·ƒ
- **æ–‡æ¡£æ›´æ–°**: åŒæ­¥
- **ç¤¾åŒºåé¦ˆ**: å“åº”

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸º @ldesign/publisher åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

ç‰¹åˆ«æ„Ÿè°¢:
- TypeScript å›¢é˜Ÿ
- Vitest å›¢é˜Ÿ
- Commander.js å›¢é˜Ÿ
- æ‰€æœ‰å¼€æºåº“çš„ä½œè€…

---

## ğŸ“„ è®¸å¯è¯

MIT Â© LDesign Team

---

**é¡¹ç›®ä¸»é¡µ**: https://github.com/ldesign/packages/publisher  
**NPM ä¸»é¡µ**: https://www.npmjs.com/package/@ldesign/publisher  
**æ–‡æ¡£**: æŸ¥çœ‹ docs/ ç›®å½•

---

# ğŸš€ ç«‹å³å¼€å§‹ä½¿ç”¨ @ldesign/publisherï¼

```bash
pnpm add -D @ldesign/publisher
ldesign-publisher precheck
ldesign-publisher publish
```

**ä¼ä¸šçº§çš„ NPM å‘å¸ƒç®¡ç†ï¼Œå°±åœ¨è¿™é‡Œï¼** ğŸ‰

